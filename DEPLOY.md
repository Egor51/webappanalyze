# Инструкция по развертыванию на GitHub Pages

## Подготовка репозитория

1. Создайте новый репозиторий на GitHub с именем `webappanalyze` (или любым другим)

2. Клонируйте репозиторий локально:
   ```bash
   git clone https://github.com/ваш-username/webappanalyze.git
   cd webappanalyze
   ```

3. Скопируйте все файлы проекта в клонированную директорию

4. Убедитесь, что в `vite.config.js` указан правильный `base`:
   ```javascript
   base: '/webappanalyze/', // Замените на имя вашего репозитория
   ```

## Настройка GitHub Pages через GitHub Actions

### Шаг 1: Включение GitHub Pages

1. Перейдите в настройки репозитория: `Settings` → `Pages`
2. В разделе "Build and deployment":
   - Source: выберите `GitHub Actions`
3. Сохраните изменения

### Шаг 2: Проверка workflow

1. Убедитесь, что файл `.github/workflows/deploy.yml` присутствует в репозитории
2. Workflow автоматически запустится при push в ветку `main`

### Шаг 3: Первый деплой

1. Добавьте все файлы в git:
   ```bash
   git add .
   ```

2. Создайте коммит:
   ```bash
   git commit -m "Initial commit: MurmanClick app"
   ```

3. Переключитесь на ветку main (если нужно):
   ```bash
   git branch -M main
   ```

4. Отправьте код на GitHub:
   ```bash
   git push -u origin main
   ```

5. Перейдите в раздел `Actions` вашего репозитория на GitHub
6. Дождитесь завершения workflow "Deploy to GitHub Pages"
7. После успешного деплоя приложение будет доступно по адресу:
   `https://ваш-username.github.io/webappanalyze/`

## Настройка Telegram Mini App

### Шаг 1: Создание бота

1. Откройте [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям:
   - Введите имя бота (например: `MurmanClick Bot`)
   - Введите username бота (должен заканчиваться на `bot`, например: `murmanclick_bot`)
4. Сохраните полученный токен (он понадобится позже)

### Шаг 2: Создание Mini App

1. Откройте [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newapp`
3. Выберите вашего бота из списка
4. Заполните данные:
   - **Title**: `MurmanClick`
   - **Description**: `Оценка недвижимости Мурманска и Мурманской области`
   - **Photo**: Загрузите иконку 512x512px (PNG или JPEG)
   - **Short name**: `murmanclick` (будет использоваться в URL)
   - **Web App URL**: `https://ваш-username.github.io/webappanalyze/`
   - **Webhook URL**: (можно оставить пустым, если не используете)
5. Сохраните полученные данные

### Шаг 3: Настройка меню бота

1. В [@BotFather](https://t.me/BotFather) отправьте команду `/mybots`
2. Выберите вашего бота
3. Выберите `Bot Settings` → `Menu Button`
4. Выберите `Configure Menu Button`
5. Введите текст кнопки: `Открыть приложение`
6. Укажите URL: `https://ваш-username.github.io/webappanalyze/`

## Проверка работы

1. Откройте вашего бота в Telegram
2. Нажмите на кнопку меню (или кнопку внизу экрана)
3. Приложение должно открыться в Telegram
4. Протестируйте функционал:
   - Введите адрес: `Мурманск Старостина д 53`
   - Выберите количество комнат: `2 комн`
   - Нажмите "Найти оценку"
   - Проверьте отображение результатов и графика

## Обновление приложения

После каждого изменения кода:

1. Внесите изменения в код
2. Закоммитьте изменения:
   ```bash
   git add .
   git commit -m "Описание изменений"
   git push
   ```
3. GitHub Actions автоматически соберет и задеплоит новую версию
4. Обычно деплой занимает 2-5 минут

## Решение проблем

### Приложение не открывается в Telegram

1. Проверьте, что URL в настройках Mini App правильный
2. Убедитесь, что GitHub Pages включен и приложение доступно по URL
3. Проверьте консоль браузера на наличие ошибок (F12)

### Ошибки при сборке

1. Проверьте, что все зависимости установлены: `npm install`
2. Убедитесь, что Node.js версии 18 или выше
3. Проверьте логи в разделе `Actions` на GitHub

### График не отображается

1. Проверьте, что данные приходят с API
2. Убедитесь, что в ответе есть массив `analytics`
3. Проверьте консоль браузера на ошибки JavaScript

### Проблемы с темой

1. Приложение автоматически синхронизируется с темой Telegram
2. Можно переключить тему вручную кнопкой в шапке
3. Тема сохраняется в localStorage

## Дополнительные настройки

### Кастомный домен

Если у вас есть собственный домен:

1. В настройках репозитория: `Settings` → `Pages`
2. Введите ваш домен в поле "Custom domain"
3. Настройте DNS записи согласно инструкциям GitHub
4. Обновите URL в настройках Mini App в BotFather

### HTTPS

GitHub Pages автоматически предоставляет HTTPS для всех сайтов. Никаких дополнительных настроек не требуется.

## Поддержка

При возникновении проблем:
1. Проверьте логи GitHub Actions
2. Проверьте консоль браузера (F12)
3. Убедитесь, что все настройки выполнены согласно инструкции

